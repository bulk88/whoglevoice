!function(){window.wvCopyToClipboard=function(t,n,o){var a,e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),e.setSelectionRange(0,99999);try{if(!(a=document.execCommand("copy")))throw'document.execCommand("copy") returned false';a=1}catch(e){(a=document.createElement("textarea")).value=t,o?a.onblur=function(e){e=e.target.parentNode;e.parentNode.replaceChild(n,e),o()}:alert("Copy Failed: "+e),(a=document.createElement("label").appendChild(a).parentNode).insertBefore(document.createTextNode("Auto Copy failed. Copy this manually:"),a.firstChild),n.parentNode.replaceChild(a,n),(a=a.lastChild).select(),a.setSelectionRange(0,99999),a=0}return document.body.removeChild(e),a},window.wvWipeAuthToken=function(e){var t=lazySignedInEmail();delete window.wvLinkFmt,t&&(localStorage.removeItem("linkfmt/id/"+h()),localStorage.setItem("wvLastExpires",n())),localStorage.setItem("wvCurAcnt",e?"":t),localStorage.removeItem("gvauthobj"),localStorage.removeItem("wvThdListA"),localStorage.removeItem("wvThdListM"),localStorage.removeItem("wvArchView")},window.drawLoginBar=function(){var e=document.getElementById("sign-in-bar");if(e){for(;e.lastChild;)e.removeChild(e.lastChild);var t=e.appendChild(document.createElement("a"));"http:"==window.location.protocol?(t.textContent=" ̵S̵ ",t.style.backgroundColor="red",t.onclick=function(){window.location.protocol="https"}):(t.textContent="S",t.style.backgroundColor="lime",t.onclick=function(){window.location.protocol="http"});var n,o=lazySignedInEmail(),t=document.createElement("button");o.length?(e.appendChild(document.createTextNode("Signed in: ")),(n=document.createElement("a")).href="#",n.textContent=n.x_eml=o,n.x_num=a(),n.onclick=function(){return this.textContent=this.textContent==this.x_eml?this.x_num:this.x_eml,!1},t.textContent="Logout",t.onclick=function(){wvWipeAuthToken(1),drawLoginBar()}):(n=document.createTextNode("Logged out"),t.textContent="Login",t.onclick=function(){getAuthToken(refreshNoUI)}),e.appendChild(n),e.appendChild(t)}};var c={};function p(e){var t;if(m=void 0,(d=e)&&e.length)try{(t=JSON.parse(e))&&"object"==typeof t&&(m=t)}catch(e){}}function e(){var e=0|this,t=localStorage.getItem("gvauthobj");if(d!==t&&p(t),!m){if(e)throw"Not logged in.";return""}switch(e){case 0:return m.profile.email;case 1:return m.primaryDid;case 2:return m.profile.sub;case 3:return m.session_state.extraQueryParams.authuser;case 4:return m.expires_at;default:return alert("unk field in lazy auth getter"),""}}c.kh={},c.lh=null,c.nh=function(){if(!c.lh){c.lh={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++){var o=e.concat(t[n].split(""));c.kh[n]=o;for(var a=0;a<o.length;a++){var r=o[a];void 0===c.lh[r]&&(c.lh[r]=a)}}}},c.Re=function(e){return/^[\s\xa0]*$/.test(e)},c.Nv=function(o,e){function t(e){for(;a<o.length;){var t=o.charAt(a++),n=c.lh[t];if(null!=n)return n;if(!c.Re(t))throw Error("x`"+t)}return e}c.nh();for(var a=0;;){var n=t(-1),r=t(0),s=t(64),i=t(64);if(64===i&&-1===n)break;e(n<<2|r>>4),64!=s&&(e(r<<4&240|s>>2),64!=i&&e(s<<6&192|i))}},c.Mv=function(e){for(var t=[],n=0,o=0;n<e.length;){var a,r,s=e[n++];s<128?t[o++]=String.fromCharCode(s):191<s&&s<224?(a=e[n++],t[o++]=String.fromCharCode((31&s)<<6|63&a)):239<s&&s<365?(s=((7&s)<<18|(63&(a=e[n++]))<<12|(63&(r=e[n++]))<<6|63&e[n++])-65536,t[o++]=String.fromCharCode(55296+(s>>10)),t[o++]=String.fromCharCode(56320+(1023&s))):(a=e[n++],r=e[n++],t[o++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&r))}return t.join("")},c.Ov=function(e){var t=[];return c.Nv(e,function(e){t.push(e)}),t},c.DecodeToken=function(e){if(!(e=e&&e.id_token)||!e.split(".")[1])return null;e=(e.split(".")[1]+"...").replace(/^((....)+).?.?.?$/,"$1");e=c.Mv(c.Ov(e));return JSON.parse(e)},window.lazySignedInEmail=e.bind(0),window.lazySignedInUserIndex=e.bind(3);var d,m,a=e.bind(1),h=e.bind(2),n=e.bind(4);window.initLnkFmt=function(e){var t,n,o,a,r;!window.wvLinkFmt&&/^(?:wvoice\.us\.to|www\.voice\.tel|localhost|cp\.wvoice\.workers\.dev)$/.test(location.hostname)?(n=(a=lazySignedInEmail()&&h(),r=[,a],a&&(o=localStorage.getItem("linkfmt/id/"+a))&&(r[0]=o),r))[0]?(Function(n[0])(),e&&e()):(t=n[1])&&((n=new XMLHttpRequest).open("GET",new URL("//carrier.natasha.cat/linkfmt/id/"+t,document.baseURI).href,1),n.onreadystatechange=function(){4==n.readyState&&(200!=n.status?alert("status: "+n.status+"\nresp:"+n.response):(localStorage.setItem("linkfmt/id/"+t,n.response),Function(n.response)(),e&&e()))},n.send()):e&&e()};var g,f,_,w="https:";function v(a){(a=a.target).onload=void 0,a=a.src,fetch(a,{referrerPolicy:"no-referrer"}).then(function(e){var t=e.blob().then(function(e){return function(e){const n=new FileReader;return new Promise(t=>{n.onload=e=>{t(e.target.result.replace("data:application/octet-stream;base64,","data:image/jpeg;base64,"))},n.readAsDataURL(e)})}(e).then(function(e){var t=f[a];f[a]=[e,o],g=JSON.stringify(f),localStorage.setItem("wvAcntPickerPCache",g),t&&_[a]&&t[0]!==e&&delete _[a]})}),n=Date.now()+864e5,o=n<(o=+new Date(e.headers.get("expires")))?n:o;return t})}function C(){if(_)for(var e,t,n=Object.values(_),o=0;o<n.length;o++)(t=(e=n[o]).parentNode)&&(t.removeChild(e),e.style=null)}function o(e){var t,n,o,a=document.getElementById("picker"),r=document.createDocumentFragment();try{e=(e=JSON.parse(e))[1];for(var s=0;s<e.length;s++){var i=e[s],u=r.appendChild(document.createElement("a"));u.href=w+"//proxya6d0.us.to/o/oauth2/auth?response_type=permission%20id_token%20token&scope=openid%20profile%20email%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgooglevoice%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fnotifications%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fpeopleapi.readwrite%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fsipregistrar-3p&redirect_uri=storagerelay%3A%2F%2Fhttps%2Fvoice.google.com%3Fid%3Dauth"+Math.floor(1e6*Math.random()+1)+"&client_id=301778431048-buvei725iuqqkne1ao8it4lm0gmel7ce.apps.googleusercontent.com&authuser="+s+"&login_hint="+encodeURIComponent(i[3]),function t(o){var a=new XMLHttpRequest;a.open("GET",o.href,!0);a.responseType="json";a.onreadystatechange=function(){if(4==a.readyState)if(200==a.status)try{var n,e=(n=a.response)[0];((e=e.session_state=e.session_state||{}).extraQueryParams=e.extraQueryParams||{}).authuser=new URL(o.href).searchParams.get("authuser"),e=n[0].access_token,n={origin:"https://proxya6d0.us.to",data:JSON.stringify({params:{authResult:n[0],clientId:n[1],id:n[2],type:"authResult"}})},o.onclick=function(){return window.onmessage(n),!1},N(0,"Bearer "+e,function(e,t){e||((e=JSON.parse(n.data)).params.authResult.linkedPhone=t.phone_arr,e.params.authResult.primaryDid=t.primaryDid,n.data=JSON.stringify(e))})}catch(e){console.log(e)}else 0==a.status&&"https:"==w&&(w="http:",t(o))};a.withCredentials=!0;a.send()}(u),u.target="_blank",u.rel="opener";var l=u.appendChild((t=i[4],o=n=void 0,(o=localStorage.getItem("wvAcntPickerPCache"))?g!==o&&(f=JSON.parse(g=o)):f={},(n=(_=_||{})[t])?(o=n.parentNode)&&(o.removeChild(n),n.style=null):(n=_[t]=document.createElement("img"),(o=f[t])?(n.src=o[0],Date.now()>o[1]&&v({target:{src:t}})):(n.onload=v,n.referrerPolicy="no-referrer",n.src=t)),n));l.style.height=48,l.style.width=48,u.appendChild(document.createElement("div")).textContent=i[2],u.appendChild(document.createElement("div")).textContent=i[3]}}catch(s){r.textContent=s}for(;a.lastChild;)a.removeChild(a.lastChild);a.appendChild(r)}function y(e){var t=localStorage.getItem("wvAcntPicker");t&&!e&&o(t);var n=new XMLHttpRequest;n.open("GET",w+"//proxya6d0.us.to/ListAccounts?mo=1",!0),n.onreadystatechange=function(){var e;4==n.readyState&&(200==n.status?((e=n.getResponseHeader("content-type"))&&-1!=e.indexOf("nocookie=1")&&!localStorage.getItem("wvNo3P")&&((e=window.open(w+"//proxya6d0.us.to/chk3P"))||((e=(e=document.getElementById("picker")).parentNode.insertBefore(document.createElement("button"),e.nextSibling.nextSibling)).textContent="Test 3P Login Proxy Cookies",e.onclick=function(e){window.open(w+"//proxya6d0.us.to/chk3P"),(e=e.target).parentNode.removeChild(e.nextSibling),e.parentNode.removeChild(e)},e.parentNode.insertBefore(document.createElement("br"),e.nextSibling))),(e=n.responseText)!=t&&(o(e),localStorage.setItem("wvAcntPicker",e))):0==n.status&&"https:"==w&&(w="http:",y()))},n.withCredentials=!0,n.send()}window.getAuthToken=function(o){var t,e,a,r,n,s,i,u,l=localStorage.getItem("gvauthobj");d!==l&&p(l),m?o(m.access_token):window.onmessage?(t=window.onmessage,window.onmessage=function(e){return window.onmessage=null,e=t(e),getAuthToken(o),e}):(e=document.documentElement,(a=document.body)&&e.removeChild(a),(u=(r=e.appendChild(document.createElement("body"))).appendChild(document.createElement("button"))).textContent="Copy to Clipboard Bookmarklet to run on GV",u.onclick=function(e){wvCopyToClipboard('javascript:var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&eval(e.responseText)};e.open("GET","https://wvoice.us.to/getCredFull.js",!0);e.overrideMimeType("application/javascript");e.send();',e.target)},r.appendChild(document.createElement("br")),l=r.appendChild(document.createElement("a")),n=localStorage.getItem("wvCurAcnt"),l.href="https://voice.google.com/about"+(n?"#wvCurAcnt="+n:""),l.target="_blank",l.rel="opener",l.textContent="Open Google Voice Site",r.appendChild(document.createElement("br")),(s=r.appendChild(document.createElement("textarea"))).placeholder="Paste GV Auth Token here",s.oninput=i=function(e){var t,n="input"==e.type?e.target.value:(e.clipboardData||event&&event.clipboardData||window.clipboardData).getData("text");try{"access_token"in(t=JSON.parse(n))||(alert("No GV Auth data found in pasted string:\n\n"+n),t=void 0)}catch(e){alert("No GV Auth data found in pasted string:\n\n"+n),t=void 0}a?(document.documentElement.replaceChild(a,r),document.querySelector("#picker")&&a.getElementsByTagName("textarea")[0].onpaste(e)):document.documentElement.removeChild(r),C(),window.onmessage=null,t?(delete window.wvLinkFmt,lazySignedInEmail()&&localStorage.removeItem("linkfmt/id/"+h()),m=t,localStorage.setItem("gvauthobj",d=n),initLnkFmt(function(){o(t.access_token)})):o("USER_PASTED_UNKNOWN_AUTH_INFO"),drawLoginBar()},s.onpaste=i,r.appendChild(document.createElement("br")),(u=r.appendChild(document.createElement("button"))).textContent="Cancel/Return",u.onclick=function(){a?e.replaceChild(a,r):e.removeChild(r),C(),window.onmessage=null,o("USER_CLICKED_CANCEL"),drawLoginBar()},(u=r.appendChild(document.createElement("button"))).textContent="Auth Proxy",u.onclick=function(){var e="/o/oauth2/auth?response_type=permission%20id_token%20token&scope=openid%20profile%20email%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgooglevoice%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fnotifications%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fpeopleapi.readwrite%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fsipregistrar-3p"+(n?"":"&prompt=select_account")+"&redirect_uri=storagerelay%3A%2F%2Fhttps%2Fvoice.google.com%3Fid%3Dauth"+Math.floor(1e6*Math.random()+1)+"&client_id=301778431048-buvei725iuqqkne1ao8it4lm0gmel7ce.apps.googleusercontent.com"+(n?"&login_hint="+encodeURIComponent(n):"");window.open("https://accounts.google.com"+e),window.open(w+"//proxya6d0.us.to"+e)},(s=navigator.clipboard)&&s.readText&&((u=r.appendChild(document.createElement("button"))).textContent="Paste",u.onclick=function(e){s.readText().then(function(e){i({type:"input",target:{value:e}})}).catch(function(){e.target.previousSibling.click()})}),(l=Number(localStorage.getItem("wvLastExpires")))&&(r.appendChild(document.createElement("br")),r.appendChild(document.createTextNode("Old Tok Exp: "+new Date(l).toLocaleTimeString()))),window.onmessage=function(e){var t=e.data;tyof_data=typeof t,"https://proxya6d0.us.to"!=e.origin&&"http://proxya6d0.us.to"!=e.origin||("string"===tyof_data?((e=JSON.parse(t).params.authResult).first_issued_at=(new Date).getTime(),e.expires_at=e.first_issued_at+1e3*e.expires_in,e.profile=c.DecodeToken(e),delete e.id_token,e.access_token="Bearer "+e.access_token,i({type:"input",target:{value:JSON.stringify(e)}})):"object"===tyof_data&&"string"==typeof(t=t.chk3P)&&(-1==t.indexOf("3P=1")?localStorage.setItem("wvNo3P",1):localStorage.removeItem("wvNo3P"))),"https://voice.google.com"==e.origin&&i({type:"input",target:{value:t}})},(u=r.appendChild(document.createElement("div"))).id="picker",r.appendChild(document.createElement("br")),(u=r.appendChild(document.createElement("a"))).href=w+"//proxya6d0.us.to/AddSession?service=grandcentral&continue=https%3A%2F%2Fvoice.google.com%2Fu%2F0%2Fa%2Fi%2F4e01281e272a1ccb11ceff9704b131e5-1",u.target="_blank",u.rel="opener",u.textContent="Add Account",u.onclick=function(e){(e=e.target).href.indexOf(w)&&(e.href=w+e.href.substr(e.href.indexOf("/")));var t=function(){window.removeEventListener("focus",t),y()};window.addEventListener("focus",t)},r.appendChild(document.createElement("br")),r.appendChild(document.createElement("br")),(u=r.appendChild(document.createElement("button"))).innerHTML="ㅤLogout All Accounts ㅤ",u.onclick=function(e){(e=e.target).textContent="ㅤLogout All Accounts⌛ㅤ",_=f=g=localStorage.removeItem("wvAcntPickerPCache");var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&(200==t.status?e.textContent="ㅤLogout All Accounts✔ㅤ":e.textContent="ㅤLogout All Accounts✘ㅤ",y(1))},t.withCredentials=!0,t.open("GET",w+"//proxya6d0.us.to/delete_cookies",!0),t.send()},y())};var t,u=(t=Array.prototype.map?function(e,t,n){return Array.prototype.map.call(e,t,n)}:function(e,t,n){for(var o=e.length,a=Array(o),r="string"==typeof e?e.split(""):e,s=0;s<o;s++)s in r&&(a[s]=t.call(n,r[s],s,e));return a},function(e){return t(e,function(e){return 1<(e=e.toString(16)).length?e:"0"+e}).join("")});crypto=window.crypto||window.msCrypto||{getRandomValues:function(e){for(var t=0,n=e.length;t<n;t++)e[t]=Math.floor(256*Math.random());return e}},window.sendsms=function(t,n,o,a){getAuthToken(function(e){S(!0,e,t,n,o,a)})};var l,k,A,T,S=function(e,t,n,o,a,r){n==l&&o==k&&a==A||(l=n,k=o,A=a,T=new Uint8Array(6),crypto.getRandomValues(T),T=parseInt(u(T),16).toString());var s=new XMLHttpRequest;s.open("POST","https://www.googleapis.com/voice/v1/voiceclient/api2thread/sendsms?alt=protojson",1),s.setRequestHeader("Content-Type","application/json+protobuf; charset=UTF-8"),s.setRequestHeader("Authorization",t);var i="";if(a)if(/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/.test(a)){if(!/^https:\/\/lh3\.googleusercontent\.com/.test(a)){t="This IMG URL isn't from lh3.googleusercontent.com, GV will not accept it. Bad URL is\n\n"+a;throw alert(t),t}i=',[1,null,null,"'+a+'"]'}else i=',[1,"'+a+'",null,null]';s.onreadystatechange=function(){4==s.readyState&&(e&&401==s.status&&resp401Unauth(s.response)?(wvWipeAuthToken(),getAuthToken(function(e){S(!1,e,n,o,a,r)})):200!=s.status?(alert("status: "+s.status+"\nresp:"+s.response),r&&r(s.response||-1)):r&&r(!1,JSON.parse(s.response)))},s.send("[null,null,null,null,"+JSON.stringify(o)+',null,["+1'+n+'"],null,['+T+"]"+i+"]")};function b(t,n,o){getAuthToken(function(e){!function t(e,n,o,a,r){var s=new XMLHttpRequest;s.open("POST","https://www.googleapis.com/voice/v1/voiceclient/communication/startclicktocall?alt=protojson",1);s.setRequestHeader("Content-Type","application/json+protobuf");s.setRequestHeader("Authorization",n);s.onreadystatechange=function(){4==s.readyState&&(e&&401==s.status&&resp401Unauth(s.response)?(wvWipeAuthToken(),getAuthToken(function(e){t(!1,e,o,a,r)})):200!=s.status?(alert("status: "+s.status+"\nresp:"+s.response),r&&r(s.response||-1)):r&&r(!1))};s.send('[["phnnmbr","+1'+a+'"],["phnnmbr","+1'+o+'"]]')}(!0,e,t,n,o)})}function N(o,e,a){var r=new XMLHttpRequest;r.open("POST","https://www.googleapis.com/voice/v1/voiceclient/account/get?alt=protojson",1),r.setRequestHeader("Content-Type","application/json+protobuf"),r.setRequestHeader("Authorization",e),r.responseType="json",r.onreadystatechange=function(){if(4==r.readyState)if(o&&401==r.status&&resp401Unauth(r.response))wvWipeAuthToken(),getAuthToken(function(e){N(!1,e,a)});else if(200!=r.status)alert("status: "+r.status+"\nresp:"+r.response),a&&a(r.response||-1);else if(a){for(var e=r.response[0][2][1]||[],t={primaryDid:/^\+1(.+)$/.exec(r.response[0][0])[1],phone_arr:e},n=0;n<e.length;n++)e[n]=/^\+1(.+)$/.exec(e[n][0][1])[1];a(!1,t)}},r.send("[null,1]")}function x(e,t,n){var o=document.documentElement;if(1<e.length){var a,r=o.removeChild(o.getElementsByTagName("body")[0]),s=o.appendChild(document.createElement("body"));for(s.appendChild(document.createTextNode("Pick Outgoing Number:")),s.appendChild(document.createElement("br")),a=0;a<e.length;a++){var i=s.appendChild(document.createElement("a"));i.setAttribute("href","#"),i.textContent=e[a],i.onclick=function(e){e.preventDefault(),o.replaceChild(r,s),C(),n(!1,e.target.textContent,t)},s.appendChild(document.createElement("br"))}(i=s.appendChild(document.createElement("button"))).textContent="Cancel/Return",i.onclick=function(){o.replaceChild(r,s),C(),n("USER_CLICKED_CANCEL")}}else 1==e.length?n(!1,e[0],t):(alert("This account has no linked phone numbers for outgoing calls"),n("NO_LINKED_LINES_AVAILABLE"))}function E(o,a){var r,s,t;try{r=JSON.parse(localStorage.getItem("gvauthobj")),s=r.primaryDid,r=r.linkedPhone}catch(e){r=void 0}r?o(r,s,a):(t=function(e,t,n){e?a(e):(e=JSON.parse(localStorage.getItem("gvauthobj")),r=e.linkedPhone=t.phone_arr,s=e.primaryDid=t.primaryDid,localStorage.setItem("gvauthobj",JSON.stringify(e)),o(r,s,a))},getAuthToken(function(e){N(!0,e,t)}))}function q(){location="tel:"}window.getThread=function(t,n,o,a){getAuthToken(function(e){!function t(e,n,o,a,r,s){var i=new XMLHttpRequest;i.open("POST","https://www.googleapis.com/voice/v1/voiceclient/api2thread/get?alt=json&prettyPrint=false",1);i.setRequestHeader("Content-Type","application/json+protobuf");i.setRequestHeader("Authorization",n);i.onreadystatechange=function(){4==i.readyState&&(503==i.status?t(e,n,o,a,r,s):e&&401==i.status&&resp401Unauth(i.response)?(wvWipeAuthToken(),getAuthToken(function(e){t(!1,e,o,a,r,s)})):200!=i.status?(404==i.status||alert("status: "+i.status+"\nresp:"+i.response),r&&r(i.response||-1)):r&&r(!1,JSON.parse(i.response)))};i.send('["t.'+o+'",'+(s||100)+(a?',"'+a+'"]':"]"))}(!0,e,t,n,o,a)})},window.mkContact=function(t,n,o){getAuthToken(function(e){!function t(e,n,o,a,r){var s=new XMLHttpRequest;s.open("POST","https://content-people-pa.googleapis.com/v2/people?get_people_request.extension_set.extension_names=hangouts_phone_data&get_people_request.request_mask.include_field.paths=person.metadata&get_people_request.request_mask.include_field.paths=person.name&get_people_request.request_mask.include_field.paths=person.phone&get_people_request.request_mask.include_field.paths=person.photo&get_people_request.request_mask.include_container=CONTACT&get_people_request.request_mask.include_container=PROFILE&get_people_request.request_mask.include_container=DOMAIN_CONTACT&get_people_request.request_mask.include_container=DOMAIN_PROFILE&get_people_request.request_mask.include_container=PLACE&get_people_request.context.migration_options.use_new_request_mask_behavior=true&alt=json&prettyPrint=false",1);s.setRequestHeader("Content-Type","application/json");s.setRequestHeader("Authorization",n);s.onreadystatechange=function(){4==s.readyState&&(e&&401==s.status&&resp401Unauth(s.response)?(wvWipeAuthToken(),getAuthToken(function(e){t(!1,e,o,a,r)})):200!=s.status?(alert("status: "+s.status+"\nresp:"+s.response),r&&r(s.response||-1)):r&&r(!1,JSON.parse(s.response)))};s.send('{"name":{"display_name":'+JSON.stringify(o)+'},"phone":{"value":"+1'+a+'","type":""}}')}(!0,e,t,n,o)})},window.upContact=function(t,n,o,a,r){getAuthToken(function(e){!function n(o,a,r,s,i,u,l){var c=new XMLHttpRequest;c.open("GET","https://content-people-pa.googleapis.com/v2/people?extension_set.extension_names=PHONE_CANONICALIZATION&merged_person_source_options.person_model_params.person_model=CONTACT_CENTRIC&person_id="+r+"&request_mask.include_field.paths=person.metadata&request_mask.include_field.paths=person.name&request_mask.include_field.paths=person.website&request_mask.include_container=CONTACT&request_mask.include_container=PROFILE&request_mask.include_container=DOMAIN_CONTACT&request_mask.include_container=DOMAIN_PROFILE&request_mask.include_container=PLACE&context.migration_options.use_new_request_mask_behavior=true&prettyPrint=false&alt=json",1);c.setRequestHeader("Authorization",a);c.onreadystatechange=function(){var e,t;4==c.readyState&&(o&&401==c.status&&resp401Unauth(c.response)?(wvWipeAuthToken(),getAuthToken(function(e){n(!1,e,r,s,i,u,l)})):200==c.status&&"SUCCESS"==(t=JSON.parse(c.response).personResponse[0]).status?(t=t.person,null!=s&&(t.name[0].displayName=s),null==i&&null==u||(e=(e=t.website=t.website||[])[0]=e[0]||{},i&&(e.value=i),u&&(e.type=u,"string"!=typeof e.value&&(e.value=" ")),e.metadata=e.metadata||{container:"CONTACT"}),(c=new XMLHttpRequest).open("PUT","https://content-people-pa.googleapis.com/v2/people/"+r+"?container=CONTACT&person_id="+r+(null!=s?"&field_mask=person.name":"")+(null!=i||null!=u?"&field_mask=person.website":"")+"&get_people_request.extension_set.extension_names=phone_canonicalization&get_people_request.merged_person_source_options.person_model_params.person_model=CONTACT_CENTRIC&get_people_request.request_mask.include_field.paths=person.name&get_people_request.request_mask.include_field.paths=person.website&get_people_request.request_mask.include_container=CONTACT&get_people_request.request_mask.include_container=PROFILE&get_people_request.request_mask.include_container=DOMAIN_CONTACT&get_people_request.request_mask.include_container=DOMAIN_PROFILE&get_people_request.request_mask.include_container=PLACE&get_people_request.context.migration_options.use_new_request_mask_behavior=true&prettyPrint=false&alt=json",1),c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("Authorization",a),c.onreadystatechange=function(){4==c.readyState&&(200!=c.status?(alert("status: "+c.status+"\nresp:"+c.response),l&&l(c.response||-1)):l&&l(!1,JSON.parse(c.response)))},c.send(JSON.stringify(t))):(alert("status: "+c.status+"\nresp:"+c.response),l&&l(c.response||-1)))};c.send("")}(!0,e,t,n,o,a,r)})},window.mkCall=function(o,a,r,s){var t,n,i;1==r?(t="8004377950",n=a,i=function(e,t){e?s(e):(location="tel:"+/^\+1(.+)$/.exec(t.proxyNumber.proxyNumber.e164)[1],s(!1))},getAuthToken(function(e){!function t(e,n,o,a,r){var s=new XMLHttpRequest;s.open("POST","https://www.googleapis.com/voice/v1/proxynumbers/reserve?alt=json&prettyPrint=false",1);s.setRequestHeader("Content-Type","application/json+protobuf");s.setRequestHeader("Authorization",n);s.onreadystatechange=function(){4==s.readyState&&(e&&401==s.status&&resp401Unauth(s.response)?(wvWipeAuthToken(),getAuthToken(function(e){t(!1,e,o,a,r)})):200!=s.status?(alert("status: "+s.status+"\nresp:"+s.response),r&&r(s.response||-1)):r&&r(!1,JSON.parse(s.response)))};s.send('[[["phnnmbr","+1'+a+'"]],null,["phnnmbr","+1'+o+'"],null,0]')}(!0,e,t,n,i)})):E(2==r?function(e,t,n){n(!1,!1,t)}:x,function(e,t,n){e?s(e):r?function(e,t,n,o){wvCopyToClipboard(t+",,2"+n+"#",e,q)&&q();o(!1)}(o,n,a,s):b(t,a,s)})},window.resp401Unauth=function(e){try{if(e=JSON.parse(e),Array.isArray(e)&&16==e[0]&&!e[1].indexOf("Request had invalid authentication credentials. Expected OAuth 2 access token"))return!0;if((e=e.error)&&401==e.code&&("UNAUTHENTICATED"==e.status||"Invalid Credentials"==e.message))return!0}catch(e){}return!1},window.attachIDtoB64=function(t,n,o,a){getAuthToken(function(e){!function t(e,n,o,a,r,s){var i=new XMLHttpRequest;i.open("POST","https://www.googleapis.com/voice/v1/voiceclient/attachments/get?alt=json&prettyPrint=false",1);i.setRequestHeader("Content-Type","application/json+protobuf");i.setRequestHeader("Authorization",n);i.onreadystatechange=function(){4==i.readyState&&(e&&401==i.status&&resp401Unauth(i.response)?(wvWipeAuthToken(),getAuthToken(function(e){t(!1,e,o,a,r,s)})):200!=i.status?(alert("status: "+i.status+"\nresp:"+i.response),s&&s(i.response||-1)):s&&(i=JSON.parse(i.response),s(!1,(i.imageContent||i.videoContent||i.audioContent||i.vcardContent).content.replace(/-/g,"+").replace(/_/g,"/"))))};i.send('["'+o+'",'+a+","+(2==r?"null,null,[1]]":1==r?"null,[1,[null,null,null,null,0,null,1]]]":"1]"))}(!0,e,t,n,o,a)})},window.chkNewMsg=function(a,r){getAuthToken(function(e){var t,n,o;t=e,e=a,n=r,(o=new XMLHttpRequest).open("POST","https://www.googleapis.com/voice/v1/voiceclient/api2thread/get",1),o.setRequestHeader("Content-Type","application/json+protobuf"),o.setRequestHeader("Authorization",t),o.onreadystatechange=function(){4==o.readyState&&(200!=o.status?(404==o.status||0==o.status||401==o.status||alert("status: "+o.status+"\nresp:"+o.response),n&&n(o.response||-1)):n&&n(!1,o.response))},o.send('["t.'+e+'",1]')})},window.getContactName=function(t,n){getAuthToken(function(e){!function t(n,e,o,a){var r=new XMLHttpRequest;r.open("GET","https://content-people-pa.googleapis.com/v2/people/lookup?extension_set.extension_names=HANGOUTS_PHONE_DATA&extension_set.extension_names=CALLER_ID_LOOKUPS&merged_person_source_options.person_model_params.person_model=CONTACT_CENTRIC&id=%2B1"+o+"&match_type=LENIENT&type=PHONE&quota_filter_type=PHONE&request_mask.include_field.paths=person.name&request_mask.include_field.paths=person.website&alt=protojson",1);r.setRequestHeader("Authorization",e);r.onreadystatechange=function(){var e;4==r.readyState&&(n&&401==r.status&&resp401Unauth(r.response)?(wvWipeAuthToken(),getAuthToken(function(e){t(!1,e,o,a)})):200!=r.status?(alert("status: "+r.status+"\nresp:"+r.response),a&&a(r.response||-1)):a&&(r="[]"==(r=r.response)?void 0:(r=JSON.parse(r),[(e=r[1][0][1])[2][0][1],r[0][0][1][0],e[6]&&e[6][0][1],e[6]&&e[6][0][2]]),a(!1,r)))};r.send()}(!0,e,t,n)})}}();