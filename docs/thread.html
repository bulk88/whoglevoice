<script src=client.js></script><meta charset=utf-8 content=0 name=mobileoptimized>Welcome To Whogle Voice<button onclick=history.back()>◀Back</button><div id=sign-in-bar></div><div id=buddy-bar></div><div id=thread></div><script>var altImgLoaderWarn;function getConvoUI(e,p,g){getThread(e,p,function(t,n){var e=document.createDocumentFragment();if(t)try{404==(n=JSON.parse(t)).error.code&&'voice_error: {"error_code":"NOT_FOUND"}'==n.error.message&&(e.textContent="Thread not found. Send the first Message.")}catch(e){alert("Error getting thread:\n\n"+t)}else{for(var o,a,l,r,d=/(?:(https?|ftp):\/\/|www\.)[\w#-;!=?@\[\\\]_`{|}~]+/gi,i=lazySignedInUserIndex(),c=0;c<n.thread.item.length;c++){var m=document.createElement("p"),s=n.thread.item[c];if(s.mms_message)for(o=0;o<s.mms_message.attachment.length;o++)"VIDEO"==(a=s.mms_message.attachment[o]).media_type?((r=m.appendChild(document.createElement("video"))).onerror=threadImgAltLoader,r.src="https://voice.google.com/u/"+i+"/a/vi/"+a.id+"?m=content",r.controls=!0,r.style.maxWidth="100%",(l=m.appendChild(document.createElement("a"))).href="https://voice.google.com/u/"+i+"/a/vi/"+a.id+"?m=content",l.target="_blank",l.textContent="Download Video"):((r=document.createElement("img")).onerror=threadImgAltLoader,r.src="https://voice.google.com/u/"+i+"/a/i/"+a.id+"?s=1",r.style.maxWidth="100%",(l=document.createElement("a")).href="https://voice.google.com/u/"+i+"/a/i/"+a.id+"?s=1",l.target="_blank",l.appendChild(r),m.appendChild(l));e.insertBefore(m,e.firstChild),s.is_artificial_error_message?m.style.backgroundColor="red":m.style.outline="1px solid black",m.align="SMS_IN"==s.type?"left":"right",(r=(l=document.createTextNode(s.mms_message?s.mms_message.text:s.message_text)).textContent).match(d)?m.innerHTML=r.replace(d,'<a href="$&" target="_blank" rel="noreferrer">$&</a>'):m.appendChild(l),0==c&&(m.mid=s.id)}document.getElementById("buddy-bar").firstChild.textContent=n.thread.contact[0].name+"-",n.thread.pagination_token&&((m=document.createElement("button")).innerText=" Load More ",m.addEventListener("click",function(e){getConvoUI(location.hash.substring(1),n.thread.pagination_token)}),e.insertBefore(m,e.firstChild))}var h=document.getElementById("thread");if(p)h.replaceChild(e,h.firstChild);else{for(;h.lastChild;)h.removeChild(h.lastChild);h.appendChild(e)}g&&g()})}var pollLastTimer,pollDelay=[1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,3e3,3e3,3e3,3e3,3e3],pollDelayIdx=0;function nextPollLoop(){var e=pollDelay[pollDelayIdx],e=pollDelayIdx<pollDelay.length?pollDelay[pollDelayIdx++]:5e3;pollLastTimer=setTimeout(function(){chkNewMsg(location.hash.substring(1),function(e,t){var n=document.getElementById("thread");n&&n.lastChild?t.substr(24,40)!=n.lastChild.mid?getConvoUI(location.hash.substring(1),0,nextFastPollLoop):nextPollLoop():nextFastPollLoop()})},e)}function nextFastPollLoop(){clearTimeout(pollLastTimer),pollDelayIdx=0,nextPollLoop()}function hashChangeHandler(){for(var e,t,n=location.hash,o=document.getElementById("buddy-bar");o.lastChild;)o.removeChild(o.lastChild);""!=n&&"#"!=n?(getConvoUI(n=n.substring(1)),(e=document.createDocumentFragment()).appendChild(document.createElement("span")),(t=document.createElement("span")).appendChild(document.createTextNode(n)),e.appendChild(t),(t=document.createElement("button")).wvnum=n,t.innerText=" Call ",t.addEventListener("click",function(t){(t=t.target).innerText=" Calling ",mkCall(t.wvnum,function(e){t.innerText=0==e?" Called ✔ ":" Called ✘ "})}),e.appendChild(t),(t=document.createElement("button")).innerText=" Bottom⬇ ",t.addEventListener("click",function(e){var t=document.scrollingElement||document.body;t.scrollTop=t.scrollHeight}),e.appendChild(t),o.appendChild(e)):(o.appendChild(document.createElement("span")),o.appendChild(document.createElement("span")).textContent="no num specified in url anchor")}hashChangeHandler(),window.addEventListener("hashchange",hashChangeHandler,!1),drawLoginBar(),nextPollLoop()</script><textarea id=msg placeholder="Type outgoing msg here"></textarea><br><button onclick=history.back()>◀Back</button> <button onclick=sendUI(event)> ✉    </button> <button onclick=window.scrollTo(0,0)>⠀⬆Top⠀</button> <button onclick='document.getElementById("msg").value=""'> ✖ </button> <button onclick=getConvoUI(location.hash.substring(1))> ▽ </button><br><label for=ipk>Choose attachment:</label> <button onclick=clearPrvImg()>Clear Img</button> <input accept=image/* id=ipk onchange=loadFile(event) type=file><br><img id=prv><script>var loadFile=function(e){var t=new FileReader;t.onload=function(){document.getElementById("prv").src=t.result},t.readAsDataURL(e.target.files[0])};function clearPrvImg(){document.getElementById("ipk").value=null;var e=document.getElementById("prv"),t=e.nextSibling,n=e.parentNode;n.removeChild(e).removeAttribute("src"),n.insertBefore(e.cloneNode(),t)}function sendUI(t){t=t.target;var n=location.hash.substring(1);"no num specified in url anchor"==n&&(n="");var e,r=document.getElementById("prv").src;r&&(r=-1==(e=r.indexOf(","))?(alert("Image selected could not be turned into a DATA URL"),""):r.substr(e+1)),t.innerText=" ✉⌛ ";var o=document.getElementById("msg");sendsms(n,o.value,r,function(e){e?t.innerText=" ✉✘ ":(o.value="",clearPrvImg(),t.innerText=" ✉✔ ",getConvoUI(n,0,nextFastPollLoop))})}function threadImgAltLoader(n){(n=n.target).onerror=void 0;var e,t="VIDEO"==n.nodeName;e=(e=t?n.src:(n=n.parentNode).href).substring(e.lastIndexOf("/")+1,e.lastIndexOf("?")),attachIDtoB64(e,t?4:1,t,function(e,t){e||("VIDEO"==n.nodeName?(n.src="data:video/mp4;base64,"+t,n.nextElementSibling.href="data:video/mp4;base64,"+t):(n.href="data:image/jpeg;base64,"+t,n.firstChild.src=n.href,"addEventHandler"in n.firstChild||setTimeout(function(){var e=document.scrollingElement||document.body;e.scrollTop=e.scrollHeight},100)))}),altImgLoaderWarn||((e=document.createElement("div")).style.color="red",e.textContent="Using the alternate slow image loader.",document.body.insertBefore(e,document.getElementById("msg")),altImgLoaderWarn=!0)}</script>