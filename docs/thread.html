<link href=https://www.googleapis.com rel=preconnect crossorigin><link href=//carrier.natasha.cat rel=preconnect><link href=https://content-people-pa.googleapis.com rel=preconnect crossorigin><link href=https://p.saproxy.us.to rel=preconnect><script src=client.js></script><meta charset=utf-8 content=0 name=mobileoptimized><style>img,video{width:100%}button{line-height:1.5}</style>Welcome To Whogle Voice<button onclick=history.back()>◀Back</button><div id=sign-in-bar></div><div id=buddy-bar></div><div id=thread></div><script>var e;function x(f,E,w){var e=location.hash.substring(1);(f=f.target).textContent=" ▽⌛",getThread(e,E,function(t,e){var n=document.createDocumentFragment();if(t){try{404==(e=JSON.parse(t)).error.code&&'voice_error: {"error_code":"NOT_FOUND"}'==e.error.message&&(n.textContent="Thread not found. Send the first Message.")}catch(e){alert("Error getting thread:\n\n"+t)}f.textContent=" ▽✘",w&&w(t)}else{for(var a,r,o,i,l=/(?:(https?|ftp):\/\/|www\.)[\w#-;!=?@\[\\\]_`{|}~]+/gi,s=lazySignedInUserIndex(),m=0;m<e.thread.item.length;m++){var h=document.createElement("p"),u=e.thread.item[m];if(u.mmsMessage&&u.mmsMessage.attachment)for(a=0;a<u.mmsMessage.attachment.length;a++)"video"==(r=u.mmsMessage.attachment[a]).mediaType?((i=h.appendChild(document.createElement("video"))).src="https://p.saproxy.us.to/u/"+s+"/a/vi/"+r.id+"?m=content",i.controls=!0,(o=h.appendChild(document.createElement("a"))).href="https://p.saproxy.us.to/u/"+s+"/a/vi/"+r.id+"?m=content",o.textContent="Download Video"):"vcard"==r.mediaType?((i=h.appendChild(document.createElement("img"))).isvcard=1,i.src="https://p.saproxy.us.to/u/"+s+"/a/vc/"+r.id,(o=h.appendChild(document.createElement("a"))).href="https://p.saproxy.us.to/u/"+s+"/a/vc/"+r.id,o.textContent="Download Vcard"):((i=document.createElement("img")).src="https://p.saproxy.us.to/u/"+s+"/a/i/"+r.id+"?s=2",(o=document.createElement("a")).href="https://p.saproxy.us.to/u/"+s+"/a/i/"+r.id+"?s=4",o.onclick=p,o.appendChild(i),h.appendChild(o)),i.onerror=v,o.target="_blank";n.insertBefore(h,n.firstChild),u.isArtificialErrorMessage?h.style.backgroundColor="red":h.style.outline="1px solid black",h.align="smsIn"==u.type?"left":"right",i=new Date(Number(u.startTime)),(i=(o=document.createTextNode(i.toDateString().substring(0,11)+i.toLocaleTimeString()+"- "+(u.mmsMessage?u.mmsMessage.text:u.messageText)+" ")).textContent).match(l)?h.innerHTML=i.replace(l,'<link rel="prefetch" href="$&" /><a href="$&" target="_blank" rel="noreferrer">$&</a>'):h.appendChild(o),0==m&&(h.mid=u.id),f.textContent=" ▽✔"}""===(o=document.getElementById("buddy-bar").firstChild).textContent&&(o.textContent=e.thread.contact.reduce(function(e,t){return"Unknown"!=t.phoneNumber?t:e}).name+"-"),(i=e.thread.paginationToken)&&((h=n.insertBefore(document.createElement("button"),n.firstChild)).textContent=" Load More ",h.wvpgtok=i,h.onclick=function(e){x(e,e.target.wvpgtok)})}if(n.childNodes.length){var C=document.getElementById("thread");if(E)C.replaceChild(n,C.firstChild);else{for(;C.lastChild;)C.removeChild(C.lastChild);C.appendChild(n)}(C=document.forms.folderForm.folder).curValue=C.value=e.thread.view[0]}w&&w(!1,e)})}var t,n=[2e3,2e3,2e3,2500,2500,2500,2500,2500],a=0,r=0;function h(e){r++<14&&(e=e||(a<n.length?n[a++]:6e3),t=setTimeout(function(){chkNewMsg(location.hash.substring(1),function(e,t){var n=document.getElementById("thread");n&&n.lastChild?t.substr(24,40)!=n.lastChild.mid?x({target:{textContent:0}},0,o):h():o()})},e))}function o(){clearTimeout(t),r=a=0,h()}function u(e){localStorage.setItem("wvCallDir",e.target.value)}function i(){for(var n,e,t,a,r=location.hash,o=document.getElementById("buddy-bar");o.lastChild;)o.removeChild(o.lastChild);if(""!=r&&"#"!=r){r=r.substring(1),x({target:{textContent:0}},0,function(){h(6e3)});var i,l=document.createDocumentFragment(),s=(n=l.appendChild(document.createElement("span")),e=r,getContactName(e,function(e,t){t&&(n.textContent=t+"-")}),e='<a href="thread.html#'+e+'">',(a=localStorage.getItem(sessionStorage.getItem("wvArchView")?"wvThdListA":"wvThdListM"))&&-1!=(t=a.indexOf(e))&&-1!=(e=a.indexOf("<",t+=e.length))&&(a=a.substring(t,e))&&(n.textContent=a+"-"),(carrierUpdate=function(e){carrierUpdate.wvnode.textContent=e.match(/CINGULAR/)?"ATTW-":e.match(/CELLCO PARTNERSHIP/)?"VZW-":e.match(/OMNIPOINT|T-MOBILE USA|METROPCS/)?"TM-":e.match(/BANDWIDTH.COM/)?"BCOM-":e.match(/SPRINT SPECTRUM/)?"SPCS-":e.match(/Inteliquent/)?"ITQL-":e.match(/PEERLESS NETWORK OF NEW YORK/)?"PLSNY-":e+"-",carrierUpdate=void 0}).wvnode=l.appendChild(document.createElement("span")),document.createElement("script")),d=(s.src="//carrier.natasha.cat/"+r.substring(0,7),l.appendChild(s),(s=document.createElement("a")).textContent=r,s.href="https://www.telcodata.us/search-area-code-exchange-detail?npa="+r.substr(0,3)+"&exchange="+r.substr(3,3),l.appendChild(s),0|localStorage.getItem("wvCallDir")),m=[" In","Out On","Out Off"];for(i in m)i|=0,(s=l.appendChild(document.createElement("label"))).textContent=m[i],(s=s.appendChild(document.createElement("input"))).type="radio",s.name="d",s.value=i,s.onchange=u,s.checked=d==i;(s=l.appendChild(document.createElement("button"))).wvnum=r,s.textContent="ㅤCall ㅤ",s.onclick=function(t){(t=t.target).textContent="ㅤCalling⌛ㅤ",mkCall(t,t.wvnum,0|localStorage.getItem("wvCallDir"),function(e){t.textContent=e?"ㅤCalled ✘ㅤ":"ㅤCalled ✔ㅤ"})},(s=l.appendChild(document.createElement("button"))).textContent=" Bottom⬇ ",s.onclick=function(e){(e=document.scrollingElement||document.body).scrollTop=e.scrollHeight},o.appendChild(l)}else o.appendChild(document.createElement("span")),o.appendChild(document.createElement("span")).textContent="no num specified in url anchor"}(onhashchange=i)();var refreshNoUI=i;drawLoginBar(),window.ononline=function(){14<=r&&(r=13),h(1)}</script><textarea id=msg placeholder="Type outgoing msg here"style=width:100%></textarea><br><button onclick=history.back()>◀Back</button> <button onclick=f(event)> ✉    </button> <button onclick=window.scrollTo(0,0)>ㅤ⬆Topㅤ</button> <button onclick='document.getElementById("msg").value=""'> ✖ </button> <button onclick=x(event) id=rfsh style=width:3.5em;text-align:left;> ▽ </button><br><form name=folderForm style=display:inline><label><input onchange="return b(this)"type=radio name=folder value=allThreads>Mn</label> <label><input onchange="return b(this)"type=radio name=folder value=allArchivedThreads>Ar</label> <label><input onchange="return b(this)"type=radio name=folder value=allSpamThreads>Sm</label><span id=folderChg style=display:inline-block;width:1em>ㅤ</span></form><label for=ipk>Choose attachment:</label> <button onclick=l()>Clear Img</button> <input onchange=s(event) type=file accept=image/* id=ipk><br><img id=prv><script>var s=function(e){var t=new FileReader;t.onload=function(){document.getElementById("prv").src=t.result},t.readAsDataURL(e.target.files[0])};function l(){document.getElementById("ipk").value=null;var e=document.getElementById("prv"),t=e.nextSibling,n=e.parentNode;n.removeChild(e).removeAttribute("src"),n.insertBefore(e.cloneNode(),t)}function f(r,e){var a,i=document.getElementById("prv").src,s=document.getElementById("msg");0!=s.value.length||i||e?(clearTimeout(t),r=r.target,"no num specified in url anchor"==(a=location.hash.substring(1))&&(a=""),i&&(i=-1==(e=i.indexOf(","))?(alert("Image selected could not be turned into a DATA URL"),""):i.substr(e+1)),r.textContent=" ✉⌛ ",sendsms(a,s.value,i,function(e,t){var n;e?(r.textContent=" ✉✘ ",h()):(n=t[2],r.textContent=" ✉✔ ",x({target:{textContent:0}},0,function(e,t){e||(t.thread.item[0].id!=n?(alert("Warning: sent outgoing message , server confirmed, but not in chat log"),sendsms(a,s.value,i,function(e,t){e||o()})):(s.value="",l(),o()))}))})):(e=navigator.clipboard)&&e.readText&&e.readText().then(function(e){0==(s.value=e).length&&f(r,1)})}function m(n){n.preventDefault(),n=n.currentTarget,attachIDtoB64(n.wv_id,1,0,function(e,t){e||(n.onclick=void 0,n.href="data:image/jpeg;base64,"+t,n.firstChild.src=n.href)})}function p(e){e.preventDefault(),e.target.src=e.currentTarget.href,e.currentTarget.onclick=void 0}function v(n){(n=n.target).onerror=void 0;var o=n.isvcard||"VIDEO"==n.nodeName,r=o?n.src:(n=n.parentNode).href,t=r.lastIndexOf("?");-1==t&&(t=void 0),r=r.substring(r.lastIndexOf("/")+1,t),attachIDtoB64(r,o?4:2,o,function(e,t){e||(o?(t="data:"+(n.isvcard?"text/x-vcard":"video/mp4")+";base64,"+t,"VIDEO"==n.nodeName&&(n.src=t),n.nextElementSibling.href=t):(n.wv_id=r,n.onclick=m,n.firstChild.src="data:image/jpeg;base64,"+t,"addEventHandler"in n.firstChild||setTimeout(function(){var e=document.scrollingElement||document.body;e.scrollTop=e.scrollHeight},100)))}),e||((t=document.createElement("div")).style.color="red",t.textContent="Using the alternate slow image loader.",document.body.insertBefore(t,document.getElementById("msg")),e=1)}function b(e){function t(e,t){t=e?(alert("Error moving thread thread:\n\n"+e),e="✘",r.curValue):(e="✔",t.attributes.view[0]),n.textContent=e,r.curValue=r.value=t}var n=e.parentNode.parentNode.lastChild,o=location.hash.substring(1),r=e.parentNode.parentNode.folder;switch(n.textContent="⌛",e.value){case"allThreads":y(o,0,0,null,0,t);break;case"allArchivedThreads":y(o,0,0,null,1,t);break;case"allSpamThreads":y(o,0,1,null,0,t);break;default:throw 0}}function y(t,n,o,r,a,i){getAuthToken(function(e){w(!0,e,t,n,o,r,a,i)})}function w(e,t,n,o,r,a,i,s){function l(e,t,n){null!=t&&(e[0][n]=t?1:0,e[1][n]=1)}var u=new XMLHttpRequest,f=[["t.+1"+n],[],1];l(f,o,1),l(f,r,2),l(f,a,3),l(f,i,5),u.open("POST","https://www.googleapis.com/voice/v1/voiceclient/thread/updateattributes?alt=json&prettyPrint=false",1),u.setRequestHeader("Content-Type","application/json+protobuf"),u.setRequestHeader("Authorization","Bearer "+t),u.onreadystatechange=function(){4==u.readyState&&(e&&401==u.status&&resp401Unauth(u.response)?(wvWipeAuthToken(),getAuthToken(function(e){w(!1,e,n,o,r,a,i,s)})):200!=u.status?(404!=u.status&&alert("status: "+u.status+"\nresp:"+u.response),s&&s(u.response||-1)):s&&s(!1,JSON.parse(u.response)))},u.send(JSON.stringify(f))}!function(){function e(e){e.style.height="auto",e.style.overflow="hidden",e.style.height=e.scrollHeight+e.offset+"px",e.style.overflow=""}var t=document.getElementById("msg");t.offset=window.opera?t.offsetHeight+parseInt(window.getComputedStyle(t,null).getPropertyValue("border-top-width")):t.offsetHeight-t.clientHeight,e(t),t.oninput=function(){e(t)},t.onmouseup=function(){e(t)}}()</script>