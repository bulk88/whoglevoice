<html><head><meta name="mobileoptimized" content="0"></head>
<body>
<script src="/client.js" type="text/javascript"></script>
Welcome To Whogle Voice
<div id='sign-in-bar'></div>
<div id='buddy-bar'></div>
<script>
function hashChangeHandler () {
    var t = location.hash;
    var divBuddyBar = document.getElementById('buddy-bar');
    while (divBuddyBar.firstChild) {
        divBuddyBar.removeChild(divBuddyBar.firstChild);
    }
    if(t != '' && t != '#') {
        t = t.substring(1); //strip front off '#', its now only USA area+7
        divBuddyBar.appendChild(document.createTextNode(t+' '));
        var buttonNode = divBuddyBar.appendChild(document.createElement('button'));
        buttonNode.wvnum = t;
        buttonNode.innerText = "Call";
        buttonNode.addEventListener('click', function (evt){
            evt = evt.target;
            evt.innerText = "Calling";
            mkCall(evt.wvnum, function(err){
                if(err == false){
                    evt.innerText = "Called \u2714";
                } else {
                    evt.innerText = "Called \u2718";
                }
            });
        });
    } else {
        divBuddyBar.appendChild(document.createTextNode("no num specified in url anchor"));
    }
}
drawLoginBar();
hashChangeHandler();
window.addEventListener('hashchange', hashChangeHandler, false);
</script>
<textarea></textarea>
<br/>
<label for="ipk">Choose attachment:</label>
<input id="ipk" type="file" accept="image/*" onchange="loadFile(event)">
<button onclick="clearPrvImg()">Clear Img</button>
<br/>
<img id="prv"/>
<script>
  var loadFile = function(evt) {
    var reader = new FileReader();
    reader.onload = function(){
      var output = document.getElementById('prv');
      output.src = reader.result;
      //var b64StartPos = reader.result.indexOf(',');
      //if(b64StartPos == -1){
      //  alert("Image selected could not be turned into a DATA URL");
      //  throw("Image selected could not be turned into a DATA URL");
      //}
      //var b64Str = reader.result.substr(b64StartPos+1);
      //sendsms("3475551234","bbbbb2222", b64Str);
      0;
    }
    reader.readAsDataURL(evt.target.files[0]);
  };
function clearPrvImg() {
    document.getElementById('ipk').value=null;
    var i = document.getElementById('prv');
    var s = i.nextSibling;
    var p = i.parentNode;
    p.removeChild(i).removeAttribute('src');
    //ASOP but not Chrome requires cloneNode to get rid of the image
    //on the image element, removing src attribute has no effect, setting src
    //to empty string causes a "corrupt" image icon in ASOP, detach and reattach
    //node doesn't remove the img, only cloneNode works (AKA new node)
    p.insertBefore(i.cloneNode(), s);
}

</script>
</body></html>
